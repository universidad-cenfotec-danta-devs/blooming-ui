<div class="flex flex-col items-center text-center px-6 md:px-20 bg-[#dae5e4]">
  <!-- Main Title -->
  <h1 class="text-8xl md:text-5xl font-semibold text-[#5C684B] mt-8">
    Dr. Plant
  </h1>

  <!-- Subtitle / Description -->
  <p class="text-[#5C684B] text-xl xl:text-3xl mt-4">
    Do you need help with your plants? Dr. Plant is here for you!
  </p>
  <p class="max-w-5xl text-xl xl:text-xl text-[#5C684B] mt-8">
    With our tool, you can identify your plants and receive personalized care recommendations.
    Simply upload a photo or enter the name of your plant, and we'll tell you everything you need to know:
    when to water it, how much light it needs, and more.
    You can also set reminders so you never forget to care for your plants.
  </p>

  <!-- Three columns: left image, center snippet, right image -->
  <div class="flex justify-between items-start w-full max-w-4xl mt-8 justify-center">
    <!-- Left Image -->
    <div class="absolute left-0 top-70">
      <img
        src="../../../assets/images/dr-plant-1.png"
        alt="Left Plant"
        class="w-60 h-100 md:w-56"
      >
    </div>

    <!-- Center Column with Buttons and Upload -->
    <div class="flex flex-col items-center">
      <!-- Action Buttons -->
      <div class="mt-6 flex space-x-2">
        <button (click)="setSelectedAction('identify')" class="bg-[#DCE6D3] text-[#5C684B] px-4 py-2 rounded-md shadow-md transition">
          Identify Plant
        </button>
        <button (click)="setSelectedAction('diagnosis')" class="border border-[#DCE6D3] px-4 py-2 rounded-md shadow-md transition text-[#5C684B] secondary-btn">
          Plant Diagnosis
        </button>
        <button (click)="setSelectedAction('drplant')" class="border border-[#DCE6D3] px-4 py-2 rounded-md shadow-md transition bg-[#DCE6D3] text-[#5C684B]">
          Ask Dr. Plant
        </button>
      </div>

      <!-- Dynamic Hint Div -->
      <div class="mt-4">
        <div *ngIf="selectedAction === 'identify'">
          <p class="text-[#5C684B]">
            Upload a picture of the plant to identify it and get recommendations.
          </p>
        </div>
        <div *ngIf="selectedAction === 'diagnosis'">
          <p class="text-[#5C684B]">
            Upload a picture of your plant to identify possible diseases or problems.
          </p>
        </div>
        <div *ngIf="selectedAction === 'drplant'">
          <p class="text-[#5C684B]">
            Chat with Dr. Plant to ask questions and receive more advice.
          </p>
        </div>
      </div>

      <!-- Upload Button (only for Identify or Diagnosis) -->
      <div class="mt-6" *ngIf="selectedAction === 'identify' || selectedAction === 'diagnosis'">
        <label class="cursor-pointer primary-btn border rounded-md">
          Upload Plant Image
          <input type="file" (change)="onFileSelected($event)" class="hidden">
        </label>
        <div *ngIf="errorMessage" class="text-red-500 mt-2">
          {{ errorMessage }}
        </div>
      </div>
    </div>

    <!-- Right Image -->
    <div class="absolute right-0 top-70">
      <img
        src="../../../assets/images/dr-plant-2.png"
        alt="Right Plant"
        class="w-40 h-100 md:w-56"
      >
    </div>
  </div>

  <!-- Display the uploaded image -->
  <div *ngIf="uploadedImageUrl" class="mt-6 bg-[#dae5e4]">
    <img [src]="uploadedImageUrl" alt="Uploaded Plant" class="w-64 md:w-80 rounded-lg shadow-md">
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="mt-6 text-gray-600">
    Processing...
  </div>

  <!-- For Identify mode: show 2 cards -->
  <div *ngIf="plantDataList.length > 0 && selectedAction === 'identify'" class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 max-w-4xl bg-[#dae5e4]">
    <app-info-card
      *ngFor="let plant of plantDataList"
      [title]="plant.name"
      [description]="plant.description"
      [buttonLabel]="'Confirm'"
      (buttonClick)="confirmPlant(plant)"
    >
    </app-info-card>
  </div>

  <!-- For Diagnosis mode: show 1 card -->
  <div *ngIf="plantDataList.length > 0 && selectedAction === 'diagnosis'" class="grid grid-cols-1 gap-6 mt-8 max-w-4xl bg-[#dae5e4]">
    <app-info-card
      [title]="plantDataList[0].name"
      [description]="plantDataList[0].description"
      [buttonLabel]="'Confirm'"
      (buttonClick)="confirmPlant(plantDataList[0])"
    >
    </app-info-card>
    <!-- Optionally, you may also include a button to switch to chat -->
    <app-info-card
      [title]="'Or, Ask Dr. Plant'"
      [description]="'Get more information through chat.'"
      [buttonLabel]="'Ask Dr. Plant'"
      (buttonClick)="goToChat()"
    >
    </app-info-card>
  </div>

  <!-- When in chat mode, show the chat component and pass chatPlantId -->
  <app-dr-planta-chat
    id="drPlantaChat"
    class="w-full"
    [plantId]="chatPlantId"
    *ngIf="selectedAction === 'drplant'"
  >
  </app-dr-planta-chat>
</div>
