<header class="shadow w-full bg-white">
  <div class="max-w-8xl mx-auto px-6 py-5 flex items-center justify-between" style="color: var(--main-text);">

    <!-- Left: Logo -->
    <div class="flex-none ml-4 motion-safe:animate-fade-down">
      <svg height="25" viewBox="0 0 97 15" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.18 14.14C5.46 14.14 4.76 14.08 4.12 14H0.46V4.64C0.46 1.2 3.18 0.299999 5.16 0.299999C8.92 0.299999 11.68 1.56 11.68 3.9C11.68 5.56 10.32 6.62 8.2 7.1C10.88 7.44 12.7 8.5 12.7 10.4C12.7 12.74 9.94 14.14 6.18 14.14ZM5.08 7.02C7.28 6.98 8.36 5.5 6.52 3.2C5.6 2.04 4.26 1.48 3.2 1.48C1.88 1.48 1.72 2.3 1.92 2.8C2.42 3.98 4.84 3.86 4.84 6.44V12.18C6.02 13.54 7.12 13.94 8.12 13.4C8.88 12.98 9.08 11.24 8.04 9.54C7.14 8.1 6.04 7.46 5.08 7.46V7.02ZM24.0464 8.74C24.4264 10.54 24.3064 14.14 20.4864 14.14C17.5064 14.14 17.0464 12 15.6664 12C14.2664 12 14.0264 13.04 14.0264 14H13.5264V0.439999H17.9064V6.7C17.9064 9.02 14.7664 8.14 14.1264 11.26C15.0064 9.6 16.6464 8.94 18.0264 8.94C20.0064 8.94 21.1464 10.5 22.1264 10.5C23.1264 10.5 23.6464 9.36 23.5464 8.72L24.0464 8.74ZM30.0306 0.32C33.7906 0.32 36.8106 3.4 36.8106 7.22C36.8106 11.04 33.7906 14.14 30.0306 14.14C26.2906 14.14 23.2506 11.04 23.2506 7.22C23.2506 3.4 26.2906 0.32 30.0306 0.32ZM33.4106 12.66C34.5506 11.94 33.9906 8.92 32.1106 5.94C30.2506 2.94 27.8106 1.08 26.6506 1.8C25.5106 2.52 26.0906 5.52 27.9506 8.52C29.8106 11.52 32.2706 13.36 33.4106 12.66ZM44.1127 0.32C47.8727 0.32 50.8927 3.4 50.8927 7.22C50.8927 11.04 47.8727 14.14 44.1127 14.14C40.3727 14.14 37.3327 11.04 37.3327 7.22C37.3327 3.4 40.3727 0.32 44.1127 0.32ZM47.4927 12.66C48.6327 11.94 48.0727 8.92 46.1927 5.94C44.3327 2.94 41.8927 1.08 40.7327 1.8C39.5927 2.52 40.1727 5.52 42.0327 8.52C43.8927 11.52 46.3527 13.36 47.4927 12.66ZM57.17 3.26C57.73 5.1 57.67 4.8 58.09 6.38L58.19 6.8C58.21 6.66 58.25 6.52 58.29 6.38C58.73 4.8 58.67 5.1 59.21 3.26C59.99 0.659999 61.67 0.459999 64.17 0.439999H64.69V14H60.31V13.62C60.31 8.7 63.77 11.18 64.13 2.12C63.75 3.34 63.65 3.62 63.09 5.54C62.09 8.82 58.45 7.74 58.45 11.12H57.95C57.95 7.74 54.31 8.82 53.31 5.54C52.73 3.58 52.63 3.34 52.23 2.06C52.59 11.18 56.09 8.7 56.09 13.62V14H51.71V0.439999C54.49 0.439999 56.35 0.479999 57.17 3.26ZM70.2111 14H65.8311V0.439999H70.2111V14ZM77.2389 3.3C78.2789 5.16 79.5189 7.34 80.3589 8.9C80.8189 9.76 81.1789 10.44 81.4389 11.06C80.7989 3.58 77.6989 5.5 77.6989 0.819999V0.439999H82.0589V14H81.5589C81.5589 10.84 77.5389 12.66 75.6589 9.36L71.9189 2.78C72.4389 11.06 75.7189 8.84 75.7189 13.62V14H71.3589V0.439999H71.8589C73.6189 0.439999 75.6189 0.479999 77.2389 3.3ZM96.1391 5.62V10.96C94.4791 12.86 92.3391 14.14 89.6791 14.14C85.9391 14.14 82.8991 11.04 82.8991 7.22C82.8991 3.4 85.9391 0.32 89.6791 0.32C91.6591 0.32 92.9791 1.86 93.9591 1.86C94.9591 1.86 95.1591 1.3 95.1591 0.42H95.6191C95.8991 2.62 95.2991 5.38 92.3191 5.38C89.3391 5.38 88.3191 0.52 86.2991 1.8C85.1591 2.52 85.7391 5.52 87.5991 8.52C89.3791 11.4 91.8191 13.62 93.2391 12.78C94.3191 12.14 91.7591 10.78 91.7591 8.6V8.26H89.9791V7.78H92.4191C95.3191 7.78 95.6391 5.62 95.6391 5.62H96.1391Z" fill="#97A97C"/>
      </svg>
    </div>

    <!-- Center: Navigation Links -->
    <nav class="flex-1 hidden md:flex justify-center space-x-6 font-semibold motion-safe:animate-fade-down">
      <a href="/home" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.HOME' | translate }}</a>
      <a href="home/dr-plant" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.DR_PLANTA' | translate }}</a>
      <a href="home/pot-editor" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.MACETAS' | translate }}</a>
      <!-- <a href="home/nurseries" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.VIVERO' | translate }}</a> -->
      <a href="home/flora-by-zone" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.PLANTAS_ZONA' | translate }}</a>
    </nav>

    <!-- Right: Icons and Language Selector -->
    <div class="flex-none flex items-center space-x-6 mr-4 motion-safe:animate-fade-down">
      <button class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
        <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1" />
          <circle cx="20" cy="21" r="1" />
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
        </svg>
      </button>

      <app-language-selector></app-language-selector>

      <!-- User Icon -->
      <button *ngIf="user != null" class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
        <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </button>

      <div class="relative" (mouseenter)="showDropdown()" (mouseleave)="hideDropdownDelayed()">
        <!-- Dropdown Menu Icon -->
        <button type="button" class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
          <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
               width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <line x1="4" y1="6" x2="20" y2="6" />
            <line x1="4" y1="12" x2="20" y2="12" />
            <line x1="4" y1="18" x2="20" y2="18" />
          </svg>
        </button>

        <!-- Dropdown Menu (stays open on hover) -->
        <div *ngIf="isDropdownOpen"
             class="absolute right-0 mt-2 w-56 bg-[#F5FBEF] text-[var(--main-text)] rounded-md shadow-lg z-10 transition-opacity duration-200"
             (mouseenter)="cancelHideDropdown()"
             (mouseleave)="hideDropdownDelayed()"
             role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
          <a href="/login" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.AUTH' | translate }}
          </a>
          <a href="/home/pot-editor" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.POTS' | translate }}
          </a>
          <a href="home/create-nursery" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.NURSERIES' | translate }}
          </a>
          <a href="/home/dr-plant" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.PLANT_CARE' | translate }}
          </a>
          <!-- <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.CART_ORDERS' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.NOTIFICATIONS' | translate }}
          </a> -->
          <a *ngIf="userRole == 'ADMIN_USER'" href="/admin/users" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.ADMIN' | translate }}
          </a>

        </div>
      </div>

     <!-- Logout Button (opens confirmation modal) -->
     <button *ngIf="user != null" type="button" (click)="initiateLogout()" class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
      <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
           xmlns="http://www.w3.org/2000/svg"
           viewBox="0 0 24 24"
           fill="none"
           stroke="currentColor"
           stroke-linecap="round"
           stroke-linejoin="round"
           width="24"
           height="24"
           stroke-width="2">
        <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path>
        <path d="M9 12h12l-3 -3"></path>
        <path d="M18 15l3 -3"></path>
      </svg>
    </button>
  </div> <!-- End Right: Icons and Language Selector -->

    <!-- Mobile: Navigation -->
    <div class="md:hidden bg-white px-4 py-3 motion-safe:animate-fade-down">
      <nav class="flex justify-around text-[22px] font-medium">
        <a href="/home" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.HOME' | translate }}</a>
        <a href="/dr-plant" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.DR_PLANTA' | translate }}</a>
        <!-- <a href="/" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.VIVERO' | translate }}</a> -->
      </nav>
    </div>
  </div> <!-- End main container -->

  <app-modal #logoutModal
  title="{{ 'HEADER.MODAL.LOGOUT_TITLE' | translate }}"
  message="{{ 'HEADER.MODAL.LOGOUT_MESSAGE' | translate }}"
  confirmText="{{ 'HEADER.MODAL.CONFIRM' | translate }}"
  cancelText="{{ 'HEADER.MODAL.CANCEL' | translate }}"
  (confirm)="onLogoutConfirm()"
  (cancel)="onLogoutCancel()">
</app-modal>
</header>
