<header class="shadow w-full bg-white">
  <div class="max-w-8xl mx-auto px-6 py-5 flex items-center justify-between" style="color: var(--main-text);">

    <!-- Left: Logo -->
    <div class="flex-none ml-4 motion-safe:animate-fade-down">
      <div class="text-5xl font-bold font-[Ahsing]">
        <span>{{ 'HEADER.BLOOMING' | translate }}</span>
      </div>
    </div>

    <!-- Center: Navigation Links -->
    <nav class="flex-1 hidden md:flex justify-center space-x-6 text-[25px] font-semibold motion-safe:animate-fade-down">
      <a href="/home" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.HOME' | translate }}</a>
      <a href="home/dr-plant" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.DR_PLANTA' | translate }}</a>
      <a href="home/pot-editor" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.MACETAS' | translate }}</a>
      <a href="home/nurseries" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.VIVERO' | translate }}</a>
      <a href="home/flora-by-zone" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.PLANTAS_ZONA' | translate }}</a>
    </nav>

    <!-- Right: Icons and Language Selector -->
    <div class="flex-none flex items-center space-x-6 mr-4 motion-safe:animate-fade-down">

      <!-- Cart Icon -->
      <button class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
        <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1" />
          <circle cx="20" cy="21" r="1" />
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
        </svg>
      </button>

      <!-- Language Selector -->
      <app-language-selector></app-language-selector>

      <!-- User Icon -->
      <button class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
        <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </button>

      <div class="relative" (mouseenter)="showDropdown()" (mouseleave)="hideDropdownDelayed()">
        <!-- Dropdown Menu Icon -->
        <button type="button" class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
          <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
               width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <line x1="4" y1="6" x2="20" y2="6" />
            <line x1="4" y1="12" x2="20" y2="12" />
            <line x1="4" y1="18" x2="20" y2="18" />
          </svg>
        </button>

        <!-- Dropdown Menu (stays open on hover) -->
        <div *ngIf="isDropdownOpen"
             class="absolute right-0 mt-2 w-56 bg-[#F5FBEF] text-[var(--main-text)] rounded-md shadow-lg z-10 transition-opacity duration-200"
             (mouseenter)="cancelHideDropdown()"
             (mouseleave)="hideDropdownDelayed()"
             role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.AUTH' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.POTS' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.NURSERIES' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.PLANT_CARE' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.CART_ORDERS' | translate }}
          </a>
          <a href="#" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.NOTIFICATIONS' | translate }}
          </a>
          <a *ngIf="userRole == 'ADMIN_USER'" href="/admin/users" class="block px-4 py-3 hover:bg-[#e7f1dd]" role="menuitem">
            {{ 'HEADER.ADMIN' | translate }}
          </a>
          
        </div>
      </div>

     <!-- Logout Button (opens confirmation modal) -->
     <button type="button" (click)="initiateLogout()" class="text-[var(--main-text)] hover:text-[var(--secondary-color)] transition duration-300 cursor-pointer">
      <svg class="h-7 w-7 text-[var(--secondary-color)] hover:scale-110 transition-transform duration-200"
           xmlns="http://www.w3.org/2000/svg"
           viewBox="0 0 24 24"
           fill="none"
           stroke="currentColor"
           stroke-linecap="round"
           stroke-linejoin="round"
           width="24"
           height="24"
           stroke-width="2">
        <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path>
        <path d="M9 12h12l-3 -3"></path>
        <path d="M18 15l3 -3"></path>
      </svg>
    </button>
  </div> <!-- End Right: Icons and Language Selector -->

    <!-- Mobile: Navigation -->
    <div class="md:hidden bg-white px-4 py-3 motion-safe:animate-fade-down">
      <nav class="flex justify-around text-[22px] font-medium">
        <a href="#" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.HOME' | translate }}</a>
        <a href="#" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.DR_PLANTA' | translate }}</a>
        <a href="#" class="hover:text-[#4b5d42] transition duration-300">{{ 'HEADER.VIVERO' | translate }}</a>
      </nav>
    </div>
  </div> <!-- End main container -->

  <app-modal #logoutModal
  title="{{ 'HEADER.MODAL.LOGOUT_TITLE' | translate }}"
  message="{{ 'HEADER.MODAL.LOGOUT_MESSAGE' | translate }}"
  confirmText="{{ 'HEADER.MODAL.CONFIRM' | translate }}"
  cancelText="{{ 'HEADER.MODAL.CANCEL' | translate }}"
  (confirm)="onLogoutConfirm()"
  (cancel)="onLogoutCancel()">
</app-modal>
</header>
